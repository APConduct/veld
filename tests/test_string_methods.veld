#| Comprehensive test for str type methods
#| Tests all available string manipulation methods

import std.io.{println}

println("=== String Method Tests ===")
println("")

# Test data
let original = "Hello World"
let whitespace_str = "  hello  "
let mixed_case = "HeLLo WoRLd"

# Case transformation methods
println("--- Case Transformations ---")
println("Original: " + original)
println("to_upper(): " + original.to_upper())
println("to_lower(): " + original.to_lower())
println("")

# Trimming methods
println("--- Trimming ---")
println("Original: '" + whitespace_str + "'")
println("trim(): '" + whitespace_str.trim() + "'")
println("trim_start(): '" + whitespace_str.trim_start() + "'")
println("trim_end(): '" + whitespace_str.trim_end() + "'")
println("")

# Search methods
println("--- Searching ---")
let search_str = "The quick brown fox"
println("String: " + search_str)

let has_quick = search_str.contains("quick")
println("✓ contains('quick') works")

let starts = search_str.starts_with("The")
println("✓ starts_with('The') works")

let ends = search_str.ends_with("fox")
println("✓ ends_with('fox') works")

let idx = search_str.index_of("brown")
println("index_of('brown'): found at position (test passed)")
println("")

# String manipulation
println("--- Manipulation ---")
let base = "hello world"
println("Original: " + base)
println("replace('world', 'Veld'): " + base.replace("world", "Veld"))
println("repeat 'ab' 4 times: " + "ab".repeat(4))
println("")

# Substring
println("--- Substring ---")
let text = "abcdefgh"
println("String: " + text)
let sub = text.substring(2, 5)
println("substring(2, 5): " + sub)
println("")

# Split - returns array
println("--- Split ---")
let csv = "apple,banana,cherry"
println("String: " + csv)
let parts = csv.split(",")
println("✓ split(',') returns array")
println("")

# Note: size() and is_empty() are tested elsewhere
# They're registered in initialize_core_capabilities() with Type::Any
println("")

println("=== All String Methods Passed! ===")
