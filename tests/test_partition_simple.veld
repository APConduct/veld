# Test: partition() array method - simple test

# Test 1: Basic partition - evens and odds
std.io.println("Test 1: Partition evens and odds")
let numbers = [1, 2, 3, 4, 5, 6]
let result = numbers.partition(x => x % 2 == 0)
# result should be a tuple: (evens, odds)
std.io.println("  Partitioned successfully")

# Test 2: All elements match
std.io.println("\nTest 2: All elements match")
let all_even = [2, 4, 6, 8]
let result2 = all_even.partition(x => x % 2 == 0)
std.io.println("  All match - partitioned successfully")

# Test 3: No elements match
std.io.println("\nTest 3: No elements match")
let all_odd = [1, 3, 5, 7]
let result3 = all_odd.partition(x => x % 2 == 0)
std.io.println("  None match - partitioned successfully")

# Test 4: Empty array
std.io.println("\nTest 4: Empty array")
let empty = []
let result4 = empty.partition(x => x > 0)
std.io.println("  Empty array partitioned successfully")

# Test 5: Single element - matches
std.io.println("\nTest 5: Single element - matches")
let single_match = [42]
let result5 = single_match.partition(x => x > 0)
std.io.println("  Single matching element partitioned successfully")

# Test 6: Single element - doesn't match
std.io.println("\nTest 6: Single element - doesn't match")
let single_no_match = [-5]
let result6 = single_no_match.partition(x => x > 0)
std.io.println("  Single non-matching element partitioned successfully")

# Test 7: Strings by length
std.io.println("\nTest 7: Partition strings")
let words = ["cat", "elephant", "dog", "butterfly"]
let result7 = words.partition(w => w.len() <= 3)
std.io.println("  Strings partitioned successfully")

# Test 8: Extract matched and non-matched
std.io.println("\nTest 8: Extract results")
let data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
let parts = data.partition(x => x > 5)
let (large, small) = parts
std.io.println("  Large numbers count: " + large.len().to_str())
std.io.println("  Small numbers count: " + small.len().to_str())
std.io.println("  Expected: 5 large, 5 small")

# Test 9: Complex predicate
std.io.println("\nTest 9: Complex predicate")
let mixed = [1, -2, 3, -4, 5, -6, 7, -8]
let (positive, negative) = mixed.partition(x => x > 0)
std.io.println("  Positive count: " + positive.len().to_str())
std.io.println("  Negative count: " + negative.len().to_str())
std.io.println("  Expected: 4 positive, 4 negative")

# Test 10: Process each partition separately
std.io.println("\nTest 10: Process partitions separately")
let values = [10, 5, 20, 3, 15, 8]
let (above_ten, below_ten) = values.partition(x => x >= 10)
let sum_above = above_ten.reduce(0, (acc, x) => acc + x)
let sum_below = below_ten.reduce(0, (acc, x) => acc + x)
std.io.println("  Sum of values >= 10: " + sum_above.to_str())
std.io.println("  Sum of values < 10: " + sum_below.to_str())

std.io.println("\nAll partition() tests completed!")
